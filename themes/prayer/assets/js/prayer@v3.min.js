const today=new Date,day=today.getDate(),month=today.getMonth(),year=today.getFullYear(),stringMonths=["January","February","March","April","May","June","July","August","September","October","November","December"],stringDay=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];function getSelectMonth(){let t="",e="";for(let a=0;a<stringMonths.length;a++){e=a+1,t+='<option value="'+e+'"'+(a===month?" selected":"")+">"+stringMonths[a]+"</option>"}document.getElementById("month").innerHTML=t,getKota()}getSelectMonth();var selectkota=document.querySelector(".city-list"),selectOption=selectkota.options[selectkota.selectedIndex],lastSelected=localStorage.getItem("cityID");function getKota(){fetch("https://api.myquran.com/v2/sholat/kota/semua").then((t=>t.json())).then((t=>{t.forEach((function(t){let e=selectkota.getAttribute("city-id"),a=(lastSelected||e)==t.id?"selected":"",s='<option value="'+t.id+'"'+a+">"+t.lokasi+"</option>";selectkota.insertAdjacentHTML("beforeend",s)})),getJadwal()}))}function getJadwal(){const t=document.getElementById("idselect").value,e=document.getElementById("month").value,a=month+1,s=stringDay[today.getDay()]+", "+day+" "+stringMonths[month]+" "+year,n=fetch("https://api.myquran.com/v2/sholat/jadwal/"+t+"/"+year+"/"+e).then((t=>t.json())),l=fetch("https://api.myquran.com/v2/sholat/jadwal/"+t+"/"+year+"/"+a+"/"+day).then((t=>t.json()));Promise.all([n]).then((([t])=>{const e=t.data,a=e.jadwal,s=(e.lokasi,e.id);let n="",l=today.toLocaleDateString();for(var o=0;o<a.length;o++){var d=a[o],i=a[o].date;n+=`<tr class='${s} ${l==new Date(i).toLocaleDateString()?"table-active":""}'><td>${d.tanggal}</td><td>${d.imsak}</td><td>${d.subuh}</td><td>${d.dzuhur}</td><td>${d.ashar}</td><td>${d.maghrib}</td><td>${d.isya}</td></tr>`}const c=document.getElementById("data-table");document.getElementById("infosumber").innerHTML="<span>Sumber: Bimas Islam Kementerian Agama</span>";c.innerHTML=n})),Promise.all([l]).then((([t])=>{const e=t.data,a=e.jadwal,n=e.lokasi;let l="";l+="<div class='prayer-time'>",l+="<span class='name'>Imsyak</span>",l+=`<span class='time'>${a.imsak}</span>`,l+="</div>",l+="<div class='prayer-time'>",l+="<span class='name'>Subuh</span>",l+=`<span class='time'>${a.subuh}</span>`,l+="</div>",l+="<div class='prayer-time'>",l+="<span class='name'>Dzuhur</span>",l+=`<span class='time'>${a.dzuhur}</span>`,l+="</div>",l+="<div class='prayer-time'>",l+="<span class='name'>Ashar</span>",l+=`<span class='time'>${a.ashar}</span>`,l+="</div>",l+="<div class='prayer-time'>",l+="<span class='name'>Magrib</span>",l+=`<span class='time'>${a.maghrib}</span>`,l+="</div>",l+="<div class='prayer-time'>",l+="<span class='name'>Isya</span>",l+=`<span class='time'>${a.isya}</span>`,l+="</div>";let o=l,d='<div class="details">Jadwal sholat untuk wilayah '+n+" dan Sekitarnya. </div>";d+='<div class="dates">'+s+"</div>";const i=document.getElementById("headertitle"),c=document.getElementById("schedule");i.innerHTML=d,c.innerHTML=o})).catch((t=>console.log(t)))}lastSelected&&(selectkota.value=lastSelected),selectkota.onchange=function(){lastSelected=selectkota.options[selectkota.selectedIndex].value,localStorage.setItem("cityID",lastSelected),getJadwal()}; $(document).ready(function(){$("select").select2({width:"resolve"})});
